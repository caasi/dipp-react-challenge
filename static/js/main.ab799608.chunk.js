(this["webpackJsonpdipp-react-challenge"]=this["webpackJsonpdipp-react-challenge"]||[]).push([[0],{128:function(e,t,a){e.exports={className:"App_className__XlKPR"}},129:function(e,t,a){},131:function(e,t,a){},135:function(e,t,a){},136:function(e,t,a){e.exports={className:"Task2Page_className__164pR"}},139:function(e,t,a){e.exports=a(276)},144:function(e,t,a){},176:function(e,t){},178:function(e,t){},210:function(e,t){},211:function(e,t){},24:function(e,t,a){e.exports={className:"Weather_className__10LuG",day:"Weather_day__1xg-O",icon:"Weather_icon__3_CcN",temp:"Weather_temp__3aKqe",max:"Weather_max__2bzGm",min:"Weather_min__2Tm7w"}},276:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"login",(function(){return z})),a.d(n,"get",(function(){return H})),a.d(n,"update",(function(){return Z}));var r={};a.r(r),a.d(r,"list",(function(){return V})),a.d(r,"create",(function(){return ee})),a.d(r,"remove",(function(){return te}));var c={};a.r(c),a.d(c,"forecast5",(function(){return re}));var i=a(0),s=a.n(i),l=a(127),o=a.n(l),m=(a(144),a(128)),u=a.n(m),d=a(45),f=a(21),v=a(3),p=a(66),h=a.n(p),E=a(67),_=a(13),b=a.n(_),g=a(36),N=a.n(g),y=s.a.memo((function(e){var t=e.id,a=e.className,n=e.disabled,r=void 0!==n&&n,c=e.message,l=void 0===c?"":c,o=e.onSubmit,m=Object(i.useState)(""),u=Object(v.a)(m,2),d=u[0],f=u[1],p=Object(i.useState)(""),h=Object(v.a)(p,2),E=h[0],_=h[1];return s.a.createElement("form",{id:t,className:b()(N.a.className,a),onSubmit:function(e){e.preventDefault(),"function"===typeof o&&o(e,d,E)}},s.a.createElement("div",{className:N.a.username},s.a.createElement("label",{htmlFor:"login-username"},"username"),s.a.createElement("input",{id:"login-username",value:d,onChange:function(e){return f(e.target.value)}})),s.a.createElement("div",{className:N.a.password},s.a.createElement("label",{htmlFor:"login-password"},"password"),s.a.createElement("input",{id:"login-password",type:"password",value:E,onChange:function(e){return _(e.target.value)}})),s.a.createElement("button",{disabled:r,type:"submit"},"Login"),l&&s.a.createElement("p",{className:N.a.message},l))})),O=a(129),j=a.n(O),w=a(37),k=a.n(w),x=a(24),P=a.n(x),C=a(130),S=a.n(C),W=a(131),F=a.n(W),L=s.a.memo((function(e){e.id;var t=e.className,a=e.icon,n=void 0===a?"":a,r=e.main,c=void 0===r?"":r,i=e.description,l=void 0===i?"":i;return s.a.createElement("div",{className:b()(F.a.className,t)},s.a.createElement("img",{src:"".concat("http://openweathermap.org/img/w/").concat(n,".png"),alt:"".concat(c," - ").concat(l)}))})),M=s.a.memo((function(e){e.id;var t=e.className,a=e.active,n=e.data,r=e.onClick,c=n.dt_txt,i=n.main,l=(i=void 0===i?{}:i).temp_min,o=i.temp_max,m=n.weather,u=void 0===m?[]:m,d=S()(c).format("ddd"),f=Math.floor(o),v=Math.floor(l);return s.a.createElement("div",{className:b()(P.a.className,t,{active:a}),onClick:r},s.a.createElement("span",{className:P.a.day},d),u.map((function(e){return s.a.createElement(L,Object.assign({key:e.id,className:P.a.icon},e))})),s.a.createElement("div",{className:P.a.temp},s.a.createElement("span",{className:P.a.max},f,"\xb0"),s.a.createElement("span",{className:P.a.min},v,"\xb0")))})),T=a(38),I=a.n(T),G=s.a.memo((function(e){var t=e.id,a=e.className,n=e.data,r=void 0===n?{}:n,c=r.main,i=(c=void 0===c?{}:c).temp_max,l=c.temp_min,o=r.weather,m=void 0===o?[]:o,u=Math.floor(i),d=Math.floor(l);return s.a.createElement("div",{id:t,className:b()(I.a.className,a)},s.a.createElement("div",{className:I.a.time},r.dt_txt),s.a.createElement("div",{className:I.a.temp},d,"\xb0 ~ ",u,"\xb0"),s.a.createElement("div",{className:I.a.description},m&&0!==m.length&&m[0].description))})),D=a(35),J=a(20);var K=a(44),q=a(7),A=a.n(q),B=a(132),Q=a.n(B),R=a(133),U=a.n(R),X=function(e){return function(t){return new Promise((function(a){return setTimeout(a,e,t)}))}},Y={admin:{username:"admin",password:"5e884898da28047151d0e56f8dc6292773603d0d6aabbdd62a11ef721d1542d8",city:void 0},user:{username:"user",password:"c3ab8ff13720e8ad9047dd39466b3c8974e592c2fa383d4a3960714caef0c4f2",city:void 0}};function z(e,t){var a=A.a.get("users")[e]||{};return U.a.stringify(Q()(t))===a.password?Promise.resolve(a).then(X(1e3)):Promise.resolve().then(X(3e3)).then((function(){throw new Error("invalid password")}))}function H(e){var t=A.a.get("users")[e];return t?Promise.resolve(t).then(X(1e3)):Promise.resolve().then(X(3e3)).then((function(){throw new Error("user not found")}))}function Z(e,t){var a=A.a.get("users");return a[e]?(A.a.set("users",Object(J.a)({},a,Object(K.a)({},e,t))),Promise.resolve(t).then(X(1e3))):Promise.resolve().then(X(3e3)).then((function(){throw new Error("user not found")}))}A.a.get("users")||A.a.set("users",Y);var $=a(46);function V(){return Promise.resolve(A.a.get("cities")).then(X(1e3))}function ee(e){var t=[e].concat(Object($.a)(A.a.get("cities")));return A.a.set("cities",t),Promise.resolve(t).then(X(1e3))}function te(e){var t=A.a.get("cities"),a=t.findIndex((function(t){return t===e}));return-1!==a&&(t=[].concat(Object($.a)(t.slice(0,a)),Object($.a)(t.slice(a+1))),A.a.set("cities",t)),Promise.resolve(t).then(X(1e3))}A.a.get("cities")||A.a.set("cities",["Mexico","Shanghai","Tokyo","London","New York"]);var ae=a(134),ne=a.n(ae);function re(e){return ne.a.get("//api.openweathermap.org/data/2.5/forecast",{params:{appid:"e478fcf29bbe5bc557fb4db3e76d830d",q:e,units:"imperial"}}).then((function(e){return e.data}))}var ce=s.a.memo((function(e){var t=e.city,a=Object(i.useState)(),n=Object(v.a)(a,2),r=n[0],l=n[1],o=Object(D.usePromise)(Object(i.useMemo)((function(){return c.forecast5(t)}),[t])),m=Object(v.a)(o,3),u=m[0],d=void 0===u?{list:[]}:u,f=m[2],p=Object(i.useMemo)((function(){return function(e){var t=e.list,a=void 0===t?[]:t,n=0,r={},c=[],i=!0,s=!1,l=void 0;try{for(var o,m=a[Symbol.iterator]();!(i=(o=m.next()).done);i=!0){var u=o.value,d=u.dt_txt.split(" "),f=Object(v.a)(d,1)[0];!r[f]&&n<5&&(r[f]=!0,c.push(u),n+=1)}}catch(p){s=!0,l=p}finally{try{i||null==m.return||m.return()}finally{if(s)throw l}}return Object(J.a)({},e,{cnt:c.length,list:c})}(d)}),[d]),h=Object(D.useOptional)([r],(function(e){return function(e,t){var a=e.list,n=void 0===a?[]:a,r=t.split(" "),c=Object(v.a)(r,1)[0],i=[],s=!0,l=!1,o=void 0;try{for(var m,u=n[Symbol.iterator]();!(s=(m=u.next()).done);s=!0){var d=m.value,f=d.dt_txt.split(" ");Object(v.a)(f,1)[0]===c&&i.push(d)}}catch(p){l=!0,o=p}finally{try{s||null==u.return||u.return()}finally{if(l)throw o}}return Object(J.a)({},e,{cnt:i.length,list:i})}(d,e)}));return s.a.createElement("div",{className:k.a.className},f?s.a.createElement("span",null,"loading..."):s.a.createElement("ol",{className:k.a.daily},p.list.map((function(e){return s.a.createElement("li",{key:e.dt_txt},s.a.createElement(M,{active:e.dt_txt===r,data:e,onClick:function(){return l(e.dt_txt)}}))}))),h&&s.a.createElement("ol",{className:k.a.hourly},h.list.map((function(e){return s.a.createElement("li",{key:e.dt_txt},s.a.createElement(G,{className:k.a.item,data:e}))}))))})),ie=s.a.memo((function(e){var t=e.id,a=e.className,n=fe(),r=Object(i.useState)(""),c=Object(v.a)(r,2),l=c[0],o=c[1];return s.a.createElement("div",{id:t,className:b()(j.a.className,a)},s.a.createElement("h1",null,"Admin Panel"),s.a.createElement("form",{onSubmit:function(e){e.preventDefault(),n.create(l),o("")}},s.a.createElement("input",{value:l,onChange:function(e){return o(e.target.value)}}),s.a.createElement("button",{type:"submit"},"add city")),s.a.createElement("hr",null),n.cities.map((function(e){return s.a.createElement("section",{key:e},s.a.createElement("h2",null,e),s.a.createElement("button",{onClick:function(){return n.remove(e)}},"remove"),s.a.createElement(ce,{city:e}))})))})),se=a(135),le=a.n(se),oe=s.a.memo((function(e){var t=e.id,a=e.className,n=fe(),r=Ee();return s.a.createElement("div",{id:t,className:b()(le.a.className,a)},s.a.createElement("h1",null,"User Panel"),s.a.createElement("ul",null,s.a.createElement("li",null,"username: ",r.username),s.a.createElement("li",null,"my city: ",r.city)),s.a.createElement("hr",null),s.a.createElement("h2",null,"Cities"),s.a.createElement("ul",null,n.cities.map((function(e){return s.a.createElement("li",{key:e,onClick:function(){return r.setCity(e)}},s.a.createElement("a",{href:"#".concat(e)},e))}))),s.a.createElement("hr",null),r.city&&s.a.createElement("section",null,s.a.createElement("h2",null,r.city),s.a.createElement(ce,{key:r.city,city:r.city})))}));var me=Object(E.a)((function(){var e=Object(i.useState)([]),t=Object(v.a)(e,2),a=t[0],n=t[1],c=Object(i.useCallback)((function(e){r.create(e).then((function(e){return n(e)}))}),[]),s=Object(i.useCallback)((function(e){r.remove(e).then((function(e){return n(e)}))}),[]);return Object(i.useEffect)((function(){r.list().then((function(e){return n(e)}))}),[]),{cities:a,create:c,remove:s}})),ue=Object(v.a)(me,2),de=ue[0],fe=ue[1],ve=Object(E.a)((function(e){var t=e.username,a=Object(i.useState)(),r=Object(v.a)(a,2),c=r[0],s=r[1],l=Object(i.useCallback)((function(e){n.update(t,Object(J.a)({},c,{city:e})).then((function(e){return s(e)}))}),[t,c]);return Object(i.useEffect)((function(){t&&n.get(t).then((function(e){return s(e)}))}),[t]),Object(J.a)({},c,{setCity:l})})),pe=Object(v.a)(ve,2),he=pe[0],Ee=pe[1];function _e(e){var t=e.id,a=Object(i.useState)(),r=Object(v.a)(a,2),c=r[0],l=r[1],o=Object(D.usePromise)(c),m=Object(v.a)(o,3),u=m[0],d=m[1],f=m[2];return s.a.createElement("div",{id:t,className:h.a.className},s.a.createElement(de,null,!u&&s.a.createElement("div",{className:h.a.login},s.a.createElement(y,{disabled:f,message:d&&d.message,onSubmit:function(e,t,a){l(n.login(t,a))}})),u?"admin"===u.username?s.a.createElement(ie,null):s.a.createElement(he,{username:u.username},s.a.createElement(oe,null)):null))}var be=a(136),ge=a.n(be);function Ne(e){var t=e.id;return s.a.createElement("div",{id:t,className:ge.a.className},"the task 2 page")}var ye=function(e){var t=e.id;return s.a.createElement(d.a,{basename:"dipp-react-challenge"},s.a.createElement("div",{id:t,className:u.a.className},s.a.createElement("nav",null,s.a.createElement("ul",null,s.a.createElement("li",null,s.a.createElement(d.b,{to:"/task1"},"Task 1")),s.a.createElement("li",null,s.a.createElement(d.b,{to:"/task2"},"Task 2")))),s.a.createElement("main",null,s.a.createElement(f.d,null,s.a.createElement(f.b,{path:"/task1"},s.a.createElement(_e,null)),s.a.createElement(f.b,{path:"/task2"},s.a.createElement(Ne,null)),s.a.createElement(f.a,{to:"/task1"})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(s.a.createElement(ye,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},36:function(e,t,a){e.exports={className:"Login_className__1EyjJ",username:"Login_username__2ar3h",password:"Login_password__3SZDG",message:"Login_message__CMXU6"}},37:function(e,t,a){e.exports={className:"Forecast_className__2gNKt",daily:"Forecast_daily__Qge9c",hourly:"Forecast_hourly__3rkP7",item:"Forecast_item__14So_"}},38:function(e,t,a){e.exports={className:"WeatherItem_className__237QL",time:"WeatherItem_time__3ktc9",temp:"WeatherItem_temp__2uNjp",description:"WeatherItem_description__OnIu7"}},66:function(e,t,a){e.exports={className:"Task1Page_className__3HFGF",login:"Task1Page_login__3-Yu6"}}},[[139,1,2]]]);
//# sourceMappingURL=main.ab799608.chunk.js.map